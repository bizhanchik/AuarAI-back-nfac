# Video-to-Voice AI Assistant Documentation

## –û–±–∑–æ—Ä

Video-to-Voice (V2V) –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç - —ç—Ç–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∏–¥–µ–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—è Gemini AI API.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- üé• **Real-time –≤–∏–¥–µ–æ –∞–Ω–∞–ª–∏–∑** —á–µ—Ä–µ–∑ –≤–µ–±-–∫–∞–º–µ—Ä—É
- ü§ñ **AI –∞–Ω–∞–ª–∏–∑ –≤–Ω–µ—à–Ω–æ—Å—Ç–∏** —Å –ø–æ–º–æ—â—å—é Gemini 2.0 Flash
- üó£Ô∏è **Text-to-Speech** —Å —Ä—É—Å—Å–∫–æ–π –æ–∑–≤—É—á–∫–æ–π —á–µ—Ä–µ–∑ Google TTS
- üì° **WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π —Å–≤—è–∑–∏
- üí¨ **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∏–ª—è –∏ –≤–Ω–µ—à–Ω–æ—Å—Ç–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Backend (FastAPI)
- **WebSocket endpoint**: `/v2v/ws/video-chat`
- **Health check**: `/v2v/health`
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ –∫–∞–¥—Ä–æ–≤**: –∞–Ω–∞–ª–∏–∑ –∫–∞–∂–¥—ã–µ 30 –∫–∞–¥—Ä–æ–≤ (~1 —Å–µ–∫)
- **AI –º–æ–¥–µ–ª—å**: Gemini 2.0 Flash –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **TTS**: Google Text-to-Speech —Å —Ä—É—Å—Å–∫–æ–π –æ–∑–≤—É—á–∫–æ–π

### Frontend (React)
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `V2VAssistantModal.jsx`
- **–ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏**: "Talk to AI Stylist" –≤ Dashboard
- **–í–∏–¥–µ–æ capture**: HTML5 getUserMedia API
- **WebSocket –∫–ª–∏–µ–Ω—Ç**: –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–∏–¥–µ–æ –∫–∞–¥—Ä–æ–≤
- **–ê—É–¥–∏–æ –ø–ª–µ–µ—Ä**: –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–æ–≤

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Backend

–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `requirements.txt`:

```bash
pip install -r requirements.txt
```

–ö–ª—é—á–µ–≤—ã–µ –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `websockets==12.0` - WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- `opencv-python==4.10.0.84` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ
- `numpy==1.24.3` - –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `gtts==2.4.0` - Text-to-Speech
- `aiofiles==23.2.1` - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª:

```env
# Google AI (Gemini) - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!
GOOGLE_API_KEY=your-google-api-key-here

# –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (—É–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å)
DATABASE_URL=postgresql://username:password@localhost:5432/database_name
SECRET_KEY=your-secret-key-here
FRONTEND_URLS=http://localhost:5173,http://localhost:5175
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ Google API –∫–ª—é—á–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google AI Studio](https://aistudio.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `GOOGLE_API_KEY`

### 4. Frontend –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ WebSocket –Ω–∞ `ws://localhost:8000/v2v/ws/video-chat`

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ó–∞–ø—É—Å–∫ Backend

```bash
cd /path/to/your/Backend
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 2. –ó–∞–ø—É—Å–∫ Frontend

```bash
cd /path/to/your/Backend/frontend/auarai
npm run dev
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ V2V –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

1. –í–æ–π–¥–∏—Ç–µ –≤ Dashboard
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Talk to AI Stylist"**
3. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ
4. –ù–∞–∂–º–∏—Ç–µ **"–í–∫–ª—é—á–∏—Ç—å –≤–∏–¥–µ–æ"**
5. –ü–æ–ª—É—á–∞–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã –æ—Ç AI!

## Workflow –ø—Ä–æ—Ü–µ—Å—Å–∞

```mermaid
graph TD
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç 'Talk to AI Stylist'] --> B[–û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ]
    B --> C[–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket]
    C --> D[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∫–ª—é—á–∞–µ—Ç –∫–∞–º–µ—Ä—É]
    D --> E[–ó–∞—Ö–≤–∞—Ç –≤–∏–¥–µ–æ –∫–∞–¥—Ä–æ–≤ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É]
    E --> F[–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–∞–¥—Ä–∞ –≤ base64 —á–µ—Ä–µ–∑ WebSocket]
    F --> G[Backend: –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–¥—Ä–∞]
    G --> H[Gemini AI: –∞–Ω–∞–ª–∏–∑ –≤–Ω–µ—à–Ω–æ—Å—Ç–∏]
    H --> I[–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–∞]
    I --> J[Google TTS: –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ—á—å]
    J --> K[–û—Ç–ø—Ä–∞–≤–∫–∞ –∞—É–¥–∏–æ –æ–±—Ä–∞—Ç–Ω–æ –∫–ª–∏–µ–Ω—Ç—É]
    K --> L[–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–∞]
    L --> E
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ –∫–∞–¥—Ä–æ–≤

```python
# –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–π 30-–π –∫–∞–¥—Ä –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
self.analysis_interval = 30

# –ö–∞–¥—Ä—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –¥–æ 640px —à–∏—Ä–∏–Ω—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
if width > 640:
    scale = 640 / width
    new_width = 640
    new_height = int(height * scale)
    frame = cv2.resize(frame, (new_width, new_height))
```

### Prompt –¥–ª—è Gemini AI

```python
prompt = """
Analyze this image of a person and give them a genuine, positive compliment about their appearance, style, or presentation. 
Be specific about what looks good - their outfit, color choices, hair, smile, posture, or overall style.
Keep the compliment natural, friendly, and encouraging. Make it sound like something a supportive friend or professional stylist would say.
Keep it to 1-2 sentences maximum. Be authentic and avoid generic compliments.

Examples of good compliments:
- "That color really brings out your eyes beautifully!"
- "Your outfit has such a great balance of colors and style!"
- "You have such a confident, radiant smile!"
- "That hairstyle really suits your face shape perfectly!"

Give ONE specific compliment based on what you see in the image:
"""
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∑–∞—â–∏—â–µ–Ω—ã —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –í–∏–¥–µ–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –í—Å–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –±–µ–∑ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: WebSocket –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8000 –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `localhost:8000`

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–∞–º–µ—Ä–∞ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±—Ä–∞—É–∑–µ—Ä –∏–º–µ–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ

### –ü—Ä–æ–±–ª–µ–º–∞: "Google API key not configured"
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `GOOGLE_API_KEY` –≤ —Ñ–∞–π–ª `.env`

### –ü—Ä–æ–±–ª–µ–º–∞: –ê—É–¥–∏–æ –Ω–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±—Ä–∞—É–∑–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ MP3 –∏ –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–ø–ª–µ–π

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ß–∞—Å—Ç–æ—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞**: 1 –∫–∞–¥—Ä –≤ —Å–µ–∫—É–Ω–¥—É
- **–†–∞–∑–º–µ—Ä –∫–∞–¥—Ä–∞**: –º–∞–∫—Å–∏–º—É–º 640px –ø–æ —à–∏—Ä–∏–Ω–µ
- **–§–æ—Ä–º–∞—Ç –ø–µ—Ä–µ–¥–∞—á–∏**: JPEG —Å –∫–∞—á–µ—Å—Ç–≤–æ–º 80%
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: 2-5 —Å–µ–∫—É–Ω–¥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ Gemini API

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:

1. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —è–∑—ã–∫–∞ TTS**: –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `lang` –≤ `text_to_speech()`
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–∞—Å—Ç–æ—Ç—ã –∞–Ω–∞–ª–∏–∑–∞**: –ò–∑–º–µ–Ω–∏—Ç–µ `analysis_interval` –≤ `VideoToVoiceProcessor`
3. **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞**: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ–º–ø—Ç –≤ –º–µ—Ç–æ–¥–µ `process_frame()`
4. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –∞–Ω–∞–ª–∏–∑–∞**: –†–∞—Å—à–∏—Ä—å—Ç–µ –ª–æ–≥–∏–∫—É –≤ WebSocket –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞:
```bash
curl http://localhost:8000/v2v/health
```

–û—Ç–≤–µ—Ç:
```json
{
  "status": "healthy",
  "service": "v2v-assistant", 
  "gemini_configured": true
}
``` 